{% extends "base.html" %}
{% load static %}

{% block title %}Indivíduos{% endblock %} 

{% block content %}

<div class="card">
  <div class="card-body text-bg-info p-3 text-center">
    <h3>Lista de Detentos</h3>
  </div>
</div>
<br>
<table class="table table-bordered table-sm">
  <thead class="table-dark text-center">
    <tr class="align-middle">
      <th>#</th>
      <th>Nome</th>
      <th>Data nasc</th>
      <th>Cód. Preso</th>
      <th>Orcrim</th>
      <th>Presídio</th>
      <th>Situação</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    {% for individuo in object_list %}
    <tr class="align-middle">
        <td>
          {% if individuo.foto %} {# Verifique se a imagem existe antes de tentar exibi-la #}
            <img src="{{ individuo.foto.url }}" alt="{{ individuo.nome }}" style="width: 50px; height: 50px; object-fit: cover;" class="img-thumbnail">
          {% else %}
            <span>Sem foto</span>
          {% endif %}
        </td>
        <td>
          <a href="{% url "individuo_detail" individuo.pk %}">{{ individuo.nome }}</a>
        </td>
        <td class="text-center">{{ individuo.data_nasc|date:"d/m/Y" }}</td>
        <td class="text-center">{{ individuo.codigo_detento }}</td>
        <td class="text-center">{{ individuo.orcrim }}</td>
        <td class="text-center">{{ individuo.casa_prisional }}</td>
        <td class="text-center">{{ individuo.get_situacao_penal_display }}</td>
        <td class="text-center">
            <a href="{% url 'individuo_edit' pk=individuo.pk %}">Editar</a>
            <a href="{% url 'individuo_delete' pk=individuo.pk %}">Excluir</a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="2">Nenhum indivíduo encontrado.</td>
    </tr>
    {% endfor %}
</tbody>
</table>
<a href="{% url 'individuo_add' %}" class="btn btn-primary mb-3">+ indivíduo</a>
{% endblock content %}
